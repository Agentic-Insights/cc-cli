%%{init: { 'theme': 'dark' } }%%
graph TD
    subgraph "Context Window Management"
        A[Start New Chat] --> B{Check Model Capacity}
        
        B -->|200K Tokens| C1[Basic Context]
        B -->|500K Tokens| C2[Extended Context]
        B -->|2M+ Tokens| C3[Full Context]
        
        C1 --> D1[Load Essential Info]
        C2 --> D2[Load Extended Info]
        C3 --> D3[Load Complete Info]
    end

    subgraph "200K Token Window"
        D1 --> E1[index.md]
        E1 --> F1[Key Architecture]
        E1 --> G1[Critical Patterns]
    end

    subgraph "500K Token Window"
        D2 --> E2[index.md + docs/]
        E2 --> F2[Architecture + Diagrams]
        E2 --> G2[Patterns + History]
        E2 --> H2[Team Conventions]
    end

    subgraph "2M+ Token Window"
        D3 --> E3[Complete .context/]
        E3 --> F3[All Documentation]
        E3 --> G3[All Diagrams]
        E3 --> H3[Full History]
        E3 --> I3[External References]
    end

    style A fill:#2d2d2d,stroke:#fff,stroke-width:2px,color:#fff
    style B fill:#2d2d2d,stroke:#fff,stroke-width:2px,color:#fff
    
    %% Basic Context
    style C1 fill:#4444ff,stroke:#fff,stroke-width:2px,color:#fff
    style D1 fill:#4444ff,stroke:#fff,stroke-width:2px,color:#fff
    style E1 fill:#4444ff,stroke:#fff,stroke-width:2px,color:#fff
    style F1 fill:#4444ff,stroke:#fff,stroke-width:2px,color:#fff
    style G1 fill:#4444ff,stroke:#fff,stroke-width:2px,color:#fff

    %% Extended Context
    style C2 fill:#33cc33,stroke:#fff,stroke-width:2px,color:#fff
    style D2 fill:#33cc33,stroke:#fff,stroke-width:2px,color:#fff
    style E2 fill:#33cc33,stroke:#fff,stroke-width:2px,color:#fff
    style F2 fill:#33cc33,stroke:#fff,stroke-width:2px,color:#fff
    style G2 fill:#33cc33,stroke:#fff,stroke-width:2px,color:#fff
    style H2 fill:#33cc33,stroke:#fff,stroke-width:2px,color:#fff

    %% Full Context
    style C3 fill:#ff4444,stroke:#fff,stroke-width:2px,color:#fff
    style D3 fill:#ff4444,stroke:#fff,stroke-width:2px,color:#fff
    style E3 fill:#ff4444,stroke:#fff,stroke-width:2px,color:#fff
    style F3 fill:#ff4444,stroke:#fff,stroke-width:2px,color:#fff
    style G3 fill:#ff4444,stroke:#fff,stroke-width:2px,color:#fff
    style H3 fill:#ff4444,stroke:#fff,stroke-width:2px,color:#fff
    style I3 fill:#ff4444,stroke:#fff,stroke-width:2px,color:#fff

    classDef default fill:#2d2d2d,stroke:#fff,stroke-width:2px,color:#fff